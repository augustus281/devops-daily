{
  "id": "aws-vpc-networking",
  "slug": "aws-vpc-networking",
  "title": "AWS VPC Networking Fundamentals",
  "question": "Explain the difference between public and private subnets in AWS VPC. How do instances in private subnets access the internet?",
  "answer": "Public subnets have a route to an Internet Gateway (IGW), allowing direct internet access for instances with public IPs. Private subnets route internet-bound traffic through a NAT Gateway in a public subnet, enabling outbound-only access. This architecture protects backend services while allowing them to fetch updates and reach external APIs.",
  "explanation": "VPC subnet design is fundamental to AWS security architecture. The public/private split follows the principle of least exposure - only resources that need direct internet access (load balancers, bastion hosts) go in public subnets, while application servers and databases stay in private subnets.",
  "category": "AWS",
  "difficulty": "beginner",
  "tier": "junior",
  "tags": [
    "aws",
    "vpc",
    "networking",
    "cloud",
    "security"
  ],
  "codeExamples": [
    {
      "language": "hcl",
      "label": "Terraform VPC with public/private subnets",
      "code": "resource \"aws_vpc\" \"main\" {\n  cidr_block = \"10.0.0.0/16\"\n}\n\n# Public subnet with IGW route\nresource \"aws_subnet\" \"public\" {\n  vpc_id                  = aws_vpc.main.id\n  cidr_block              = \"10.0.1.0/24\"\n  map_public_ip_on_launch = true\n}\n\n# Private subnet with NAT route\nresource \"aws_subnet\" \"private\" {\n  vpc_id     = aws_vpc.main.id\n  cidr_block = \"10.0.2.0/24\"\n}\n\n# NAT Gateway in public subnet\nresource \"aws_nat_gateway\" \"main\" {\n  allocation_id = aws_eip.nat.id\n  subnet_id     = aws_subnet.public.id\n}"
    },
    {
      "language": "bash",
      "label": "Verify subnet routing",
      "code": "# List route tables\naws ec2 describe-route-tables \\\n  --filters \"Name=vpc-id,Values=vpc-xxx\" \\\n  --query 'RouteTables[*].{ID:RouteTableId,Routes:Routes}'\n\n# Check NAT Gateway status\naws ec2 describe-nat-gateways \\\n  --filter \"Name=vpc-id,Values=vpc-xxx\""
    }
  ],
  "followUpQuestions": [
    "What is the cost implication of using NAT Gateways vs NAT Instances?",
    "How do VPC Endpoints reduce the need for NAT Gateway traffic?",
    "What is the difference between a Security Group and a Network ACL?"
  ],
  "commonMistakes": [
    "Placing databases in public subnets for convenience",
    "Forgetting to create a NAT Gateway, leaving private instances without internet access",
    "Not using multiple availability zones for NAT Gateway redundancy"
  ],
  "relatedTopics": [
    "security-groups",
    "nacls",
    "vpc-endpoints",
    "transit-gateway"
  ]
}
